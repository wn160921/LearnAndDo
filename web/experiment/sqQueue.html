<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学习</title>
    <style type="text/css">
        /* *全局 */
        *{
            margin: 0;
            padding: 0;
        }
        ul {
            list-style: none;
        }
        #top{
            text-align: center;
            position: relative;
            width: 100%;
            height: 70px;
        }
        #top h1{
            letter-spacing: 10px;
        }
        #top .useInfo{

        }
        #top .spacing{
            margin-left: 30px;
            margin-right: 30px;
        }
        #container{
            height: 100%;
            overflow: auto;
        }
        .left{
            overflow: auto;
            height: 100%;
            float: left;
            width: 32%;
            border: green 2px solid;
        }
        .leftHandle{
            width: 4px;
            /*background-color: red;*/
            float: left;
            height: 100%;
            cursor:ew-resize;
        }
        .center{
            position: relative;
            width: 34%;
            float: left;
            height: 100%;
        }
        .centerHandle{
            float: left;
            width: 4px;
            height: 100%;
            /*background-color: red;*/
            cursor:ew-resize;
        }
        .right{
            float: left;
            height: 100%;
            width: 32%;
            border:green 1px solid;
        }

        .center .utilBtn{
            float: right;
            width: auto;
            height: 30px;
        }
        .editArea{
            resize: none;
            white-space: nowrap;
        }

        .center .utilBar{
            overflow: auto;
            margin: 2px;
            background: #999999;
        }
        .center .utilBar ul li{
            text-align: center;
            display: none;
            float: left;
        }
        .center .utilBar ul li .fileName{
            color: black;
            padding-left: 2px;
            padding-right: 2px;
            background: white;
            line-height: 30px;
            cursor: pointer;
        }
        .center .utilBar ul li .codediv textarea{
            position: absolute;
            width: 98%;
            height: 95%;
            top: 30px;
            left: 3px;
            border-left: 1px green solid;
            border-right: 1px green solid;
            border-bottom: 1px green solid;
            font-size: 20px;
        }
        .center .utilBar ul .unselected .codediv{
            display: none;
        }
        .center .utilBar ul .unselected .fileName{
            background: #999999;
        }
        .right #result{
            width: 84%;
            float: left;
        }
        .right ul{
            float: left;
            width: 15%;
            height: auto;
        }
        .right ul li img{
            width: 25px;
            height: 25px;
        }
        .right textarea{
            height: 98%;
            border: green 1px solid;
            /*white-space: pre-wrap;*/
        }
        .over{
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: #66666666;
            z-index: 1;
            display: none;
        }
        .theEndResult{
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: #ffbf30;
            z-index: 1;
            display: none;
            text-align: center;
        }
        .tips{
            position: fixed;
            background: #66666666;
            width: 100%;
            height: 100%;
            z-index: 2;
            display: none;
            text-align: center;
        }
        .notFocustips{
            position: fixed;
            background: #66666666;
            width: 100%;
            height: 100%;
            z-index: 2;
            display: none;
            text-align: center;
        }
        .tipContainer{
            background: white;
            width: 600px;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -100px;
            margin-left: -300px;
        }
        .over .bigPicture{
            text-align: center;
            margin: 100px auto;
            background: white;
            width: 1000px;
            height: auto;
        }
        .over .bigLeft{
            position: absolute;
            top: 50%;
            margin-top: -150px;
            margin-left: 50px;
            left: 0;
        }
        .over .bigPicture img{
            width: 100%;
            height: 100%;
        }
        .over .bigRight{
            position: absolute;
            top: 50%;
            margin-top: -150px;
            margin-right: 50px;
            right: 0;
        }


        .left ul{
            list-style: none;
        }
        .left ul li .title{
            cursor: pointer;
            font-size: 25px;
        }
        .left ul li ul li .title{
            font-size: 20px;
        }
        .left ul ul{
            margin-left: 20px;
        }

        .left ul .content{
            margin:2px 14px;
            padding: 2px;
        }

        .left ul li .codePanel{
            font-family: "Fira Code Light";
            width: 100%;
            overflow: hidden;
            white-space:nowrap;
            color: #6c2dc7;
        }
        .left .cueContent{
            color:#6c2dc7;
            padding: 2px;
            display: none;
        }
        .main{
            color: #9f000f;
        }
        .left .check{
            border: #9f000f 1px solid;
        }
    </style>
    <script src="../jquery-3.3.1.js"></script>
    <script src="myFunction.js"></script>
</head>
<body>
<div id="container">
    <div class="theEndResult">
        <h2>实验结果 </h2>
        <h3>用时</h3>
        <h3>剩余提示数</h3>
        <h3>变灰的步骤数</h3>
    </div>
    <div class="tips">
        <div class="tipContainer">
            <h3>消耗提示或者插入机会会影响最终分数，确定吗？</h3>
            不再提示<input type="checkbox" class="notTip"><br>
            <input type="button" value="确定" class="yes"> <input type="button" value="取消" class="cancle">
        </div>
    </div>
    <div class="notFocustips">
        <div class="tipContainer">
            <h3>目标编辑框未获取焦点</h3>
        </div>
    </div>
    <div class="over">
        <div class="bigPicture">
            <div class="netxTip">

            </div>
            <canvas id="myCanvas" width="1000" height="500" style="box-shadow: 0px 0px 10px black;">
                当前浏览器不支持 canvas
            </canvas>
        </div>
        <img class="bigLeft" src="../images/bigLeft.png" alt="">
        <img class="bigRight" src="../images/bigRight.png" alt="">
    </div>
    <div id="top">
        <h1>实验二：顺序循环队列中进队和出队</h1>
        <div class="useInfo">
            已用时间：<span id="time"></span><span class="spacing"></span>   剩余提示个数 <span class="cueRest">12</span>  <span class="spacing"></span> 剩余自动插入个数<span class="insertRest">5</span>
        </div>
    </div>
    <div class="left">
        <ul>
            <li>
                <div class="title"><img src="../images/arrow_down.png" alt=""><span><strong>【实验目标】</strong></span></div>
                <div class="content">
                    顺序循环队列是解决假溢出的有效方法，其区分队空与队满根据实验步骤中所提供的信息，完善SqQueue.h和main.cpp两个程序文件，完成顺序循环队列数据结构（实际上就是顺序队列）的创建。完成在顺序循环队列中判空与判满的
                </div>
            </li>
            <li>
                <div class="title"><img src="../images/arrow_down.png" alt=""><strong>【实验步骤】</strong></div>
                <div>
                    <ul>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">step_1 创建SqQueue.h</div>
                            <div class="content">
                                <div class="readyCode"></div>
                                <button class="actiontBtn1">创建</button>
                            </div>
                        </li>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">step_2 声明节点的结构类型(typedef struct)</div>
                            <div class="content">
                                <div class="cueContent">
                                    参考书P92页算法
<div class="codePanel" aim="#header">
<br>
typedef struct {<br>
&nbsp;&nbsp;&nbsp;&nbsp;ElemType *queue;<br>
&nbsp;&nbsp;&nbsp;&nbsp;int front;<br>
&nbsp;&nbsp;&nbsp;&nbsp;int rear;<br>
&nbsp;&nbsp;&nbsp;&nbsp;int queuesize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;int incrementsize;<br>
}SqQueue;
</div>
                                    <button class="insertBtn" title="将在光标位置插入">自动插入</button>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">step_3 初始化队列Q（InitQueue_Sq，大小为10，增量为5）</div>
                            <div class="content">
                                <div class="cueContent">
                                    书P93页算法3.23
<div class="codePanel" aim="#header">
<br>
void InitQueue_Sq(SqQueue &Q,int maxsize=20, int 	incresize=5){<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.queue=(ElemType*)malloc(maxsize*sizeof(ElemType));<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(!Q.queue) exit(01);<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.front=Q.rear=0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.queuesize=maxsize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.incrementsize=incresize;<br>
}<br>
</div>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">step_4 求队列长度操作（QueueLength_Sq）</div>
                            <div class="content">
                                <div class="cueContent">
                                    (Q.rear - Q.front + Q.queuesize)%Q.queuesize）
<div class="codePanel" aim="#header">
<br>
int QueueLength_Sq(SqQueue Q){<br>
&nbsp;&nbsp;&nbsp;&nbsp;return (Q.rear-Q.front+Q.queuesize)%Q.queuesize;<br>
}
</div>
                                    <button class="insertBtn">自动插入</button>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>

                        </li>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">step_5 入队操作（EnQueue_Sq，将一个新元素插入到Q的尾部，成功插入则返回true，否则返回false。</div>
                            <div class="content">
                                <div class="cueContent">
                                    按照书P92页“方法一”，首先判断队列是否已满，判满条件为(rear+1)%maxsize(或queuesize) = front），若已满，则重新分配空间，并判断队尾指针是否在队首指针之前，如果是，则需要扩容。然后将进队元素插入到队尾指针所指示的位置，再将队尾指针“依环状增1”，<br>
                                    if(队满)<br>
                                    {    //增补队列空间 <br>
                                    if(Q.front>Q.rear) <br>
                                    {需进行扩容： <br>
                                    //1.将Q.front到queuesize-1之间的元素后移Q.increasementsize个位置 <br>
                                    //2.队首指针后移Q.increasementsize个位置 <br>
                                    //队列容量增加Q.incresementsize个位置 <br>
                                    } <br>
                                    //元素e插入到队尾 <br>
                                    //队尾指针顺时针移动一个位置 <br>
                                    } <br>
                                    return true; <br>
<div class="codePanel" aim="#header"><br>
bool EnQueue_Sq(SqQueue &Q,ElemType e){<br>
&nbsp;&nbsp;&nbsp;&nbsp;//从队尾插入元素，成功则返回true <br>
&nbsp;&nbsp;&nbsp;&nbsp;if((Q.rear+1)%Q.queuesize==Q.front) //队满给顺序队列增补空间 <br>
&nbsp;&nbsp;&nbsp;&nbsp;{ <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q.queue=(ElemType*)realloc(Q.queue,(Q.queuesize+Q.incrementsize)*sizeof(ElemType)); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!Q.queue) return false; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Q.front>Q.rear)   //队首指针在队尾指针后面，重新确定位置 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i=Q.queuesize;i>=Q.front;i--){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q.queue[i+Q.incrementsize]=Q.queue[i];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q.front+=Q.incrementsize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q.queuesize+=Q.incrementsize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.queue[Q.rear]=e;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.rear=(Q.rear+1)%Q.queuesize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>
}<br>
</div>
                                    <button class="insertBtn">自动插入</button>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">step 6:出队操作（DeQueue_Sq，将顺序循环队列Q的队首元素删除，并用e值返回，成功删除返回true，否则返回false。）</div>
                            <div class="content">
                                <div class="cueContent">
                                    判断队列是否为空，判空条件为front == rear，若为空，若非空，则先将队首元素去除，然后将队首指针“依环状增1”。
<div class="codePanel" aim="#code">
<br>
bool DeQueue_Sq(SqQueue &Q,ElemType &e){<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(Q.front==Q.rear) return false;<br>
&nbsp;&nbsp;&nbsp;&nbsp;e=Q.queue[Q.front];<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.front=(Q.front+1)%Q.queuesize;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>
}<br>
</div>
                                    <button class="insertBtn">自动插入</button>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">step7: 取队首元素（GetHead_Sq）</div>
                            <div class="content">
                                e=Q.queue[Q.front];
<div class="cueContent"><br>
bool GetHead_Sq(SqQueue Q,ElemType &e){<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(Q.front==Q.rear)  return false;<br>
&nbsp;&nbsp;&nbsp;&nbsp;e=Q.queue[Q.front];<br>
&nbsp;&nbsp;&nbsp;&nbsp;return true;<br>
}<br>
</div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step 8:撤销循环队列操作（DestroyQueue_Sq）</div>
                            <div class="content">
                                free(Q.queue); Q.queuesize=0; Q.front=Q.rear=0;
<div class="cueContent"><br>
void DestroyQueue_Sq(SqQueue &Q){<br>
&nbsp;&nbsp;&nbsp;&nbsp;free(Q.queue);<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.queuesize=0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Q.front=Q.rear=0;<br>
}<br>
</div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title"><img src="../images/arrow_down.png" alt="">Step 9: 创建main.cpp文件</div>
                            <div class="content">
                                <button class="actiontBtn2">创建</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step 10：写入#include文件，用用元素类型为int</div>
                            <div class="content">
                                <div class="cueContent" aim="#code">
<div class="codePanel" aim="#header">
<br>
typedef int ElemType;<br>
# include "stdlib.h"<br>
# include "iostream"<br>
# include "iomanip"<br>
using namespace std;<br>
# include "SqQueue.h"<br>
</div>
                                    <button class="insertBtn">自动插入</button>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step 11：创建main方法</div>
                            <div class="content">
                                <div class="cueContent">
                                    提示：int main(){<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;//后续代码放在这里 <br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>
                                    }<br>
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step12: 调用SqQueue.h中的函数初始化myqueue</div>
                            <div class="content">
                                <div class="cueContent">
                                    SqQueue myqueue;
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step13: 创建含有12个元素的数组(23, 4, 2, 45, 7, 10, 88, 34, 62, 16, 28, 40)</div>
                            <div class="content">
                                <div class="cueContent">
                                    int i, x, a[]={23,4,2,45,7,10,88,34,62};
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step14: 初始化顺序循环队列muyqueue</div>
                            <div class="content">
                                <div class="cueContent">
                                    InitQueue_Sq(myQueue,10,5)
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step15: a[0]-a[9]依次入队</div>
                            <div class="content">
<div class="cueContent">
for(i=0;i<10;i++)<br>
&nbsp;&nbsp;&nbsp;&nbsp;if(!EnQueue_Sq)(myqueue,a[i])<br>
&nbsp;&nbsp;&nbsp;&nbsp;{cout&lt;&lt;"入队失败"&lt;&lt;endl; return;}<br>
</div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step16: 打印队首元素，打印队列长度, 并运行程序</div>
                            <div class="cueContent">
                                GetHead_Sq(myqueue) , QueueLength_Sq(myqueue)
                            </div>
                            <button class="cueBtn">提示</button>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step17：将a[10]入队，打印队首元素，打印队列长度，并运行程序</div>
                            <div class="content">

                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step18：将a[11]入队，打印队首元素，打印队列长度，并运行程序</div>
                            <div class="content">

                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step19：将a[0]-a[5]依次出队，并运行程序</div>
                            <div class="content">

                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">Step20：撤销队列</div>
                            <div class="content">
                                <div class="cueContent">
                                    DestroyQueue_Sq(myqueue)
                                </div>
                                <button class="cueBtn">提示</button>
                            </div>
                        </li>
                        <li>
                            <div class="title main"><img src="../images/arrow_down.png" alt="">step21 结束实验</div>
                            <div class="content">
                                <button class="settle">提交</button>
                            </div>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
    <div class="leftHandle">

    </div>
    <div class="center">
        <div class="utilBar">
            <input type="button" value="运行" class="utilBtn run"/>
            <input type="button" value="重做" class="utilBtn">
            <input type="button" value="撤销" class="utilBtn">
            <input type="button" value="A+" class="utilBtn fontSizeAdd">
            <input type="button" value="A-" class="utilBtn fontSizeDec">
            <select class="utilBtn">
                <option value="a">gcc compile</option>
                <option value="">gcc for arm</option>
                <option value="gcc for zpu">gcc for zpu</option>
                <option value="">gcc for avr</option>
            </select>
            <ul>
                <li class="unselected">
                    <div class="fileName">SqQueue.h</div>
                    <div class="codediv">
                        <textarea id="header" wrap="hard" spellcheck="false" class="editArea"></textarea>
                    </div>
                </li>
                <li>
                    <div class="fileName">main.cpp</div>
                    <div class="codediv">
                        <textarea id="code" spellcheck="false" wrap="hard" class="editArea"></textarea>
                    </div>
                </li>
            </ul>
        </div>

    </div>
    <div class="centerHandle">

    </div>
    <div class="right">
            <textarea id="result" wrap="hard" class="editArea">

            </textarea>
        <ul>

        </ul>
    </div>
</div>
<script>
    //添加悬浮提示内容
    $(".insertBtn").attr("title","请保证光标落在要插入的位置上");

    //textarea字体大小
    var fontSize = 20;
    $(".fontSizeAdd").click(function () {
        $("textarea").css("font-size",fontSize+2);
        fontSize+=2;
    });
    $(".fontSizeDec").click(function () {
        $("textarea").css("font-size",fontSize-2);
        fontSize-= 2;
    });
    var changeGreyNum = 0;
    //计时起
    var timeSpan = document.getElementById("time");
    var n= 0, timer=null;
    //开始计时
    function startTime() {
        console.log("start timer");
        clearInterval(timer);
        timer=setInterval(function () {
            n++;
            var m=parseInt(n/60);
            var s=parseInt(n%60);
            timeSpan.innerHTML=toDub(m)+":"+toDub(s);
        },1000);
    };
    //暂停并且清空计时器
    function stop() {
        clearInterval(timer);
    }
    //重置
    function reSet() {
        timeSpan.innerHTML="00:00";
        n=0;
    }
    //补零
    function toDub(n){
        return n<10?"0"+n:""+n;
    }
    startTime();

    //边框位置
    var leftDrag = false;
    var centerDrag = false;
    var mouseX=0;
    $(".leftHandle").mousedown(function (event) {
        $(".left").css("overflow","hidden");
        $(".center").css("overflow","hidden");
        mouseX = event.pageX;
        leftDrag = true;

    });
    $(".leftHandle").on("mouseup",function () {
        leftDrag = false;
        $(".left").css("overflow","auto");
        $(".center").css("overflow","auto");
    });
    $(".left").on("mouseup",function () {
        leftDrag = false;
        $(".left").css("overflow","auto");
        $(".center").css("overflow","auto");
    });
    $(".left").mousemove(function (event) {
        if(leftDrag){
            a=event.pageX-mouseX;
            leftHandleMove(a);
            mouseX=event.pageX;
        }
    });
    $(".center").on("mouseup",function () {
        leftDrag = false;
        $(".left").css("overflow","auto");
        $(".center").css("overflow","auto");
    });
    $(".center").mousemove(function (event) {
        if(leftDrag){
            a=event.pageX-mouseX;
            leftHandleMove(a);
            mouseX=event.pageX;
        }
        if(centerDrag){
            a=event.pageX-mouseX;
            centerHandleMove(a);
            mouseX=event.pageX;
        }
    });
    $(".leftHandle").mousemove(function (event) {
        if(leftDrag){
            a=event.pageX-mouseX;
            leftHandleMove(a);
            mouseX=event.pageX;
        }
    });
    function leftHandleMove(X) {
        var leftW = $(".left").width();
        console.log("f"+leftW);
        leftW = leftW + X;
        console.log("s"+leftW);
        var centerW = $(".center").width();
        centerW = centerW - X;
        $(".left").width(leftW);
        console.log("gaibianhpu"+$(".left").width());
        $(".center").width(centerW);
    }
    //照着上面再来一次，有机会再整合
    $(".centerHandle").mousedown(function (event) {
        $(".right").css("overflow","hidden");
        $(".center").css("overflow","hidden");
        mouseX = event.pageX;
        centerDrag = true;

    });
    $(".centerHandle").on("mouseup",function () {
        centerDrag = false;
        $(".right").css("overflow","auto");
        $(".center").css("overflow","auto");
    });
    $(".right").on("mouseup",function () {
        centerDrag = false;
        $(".right").css("overflow","auto");
        $(".center").css("overflow","auto");
    });
    $(".right").mousemove(function (event) {
        if(centerDrag){
            a=event.pageX-mouseX;
            centerHandleMove(a);
            mouseX=event.pageX;
        }
    });
    $(".centerHandle").mousemove(function (event) {
        if(centerDrag){
            a=event.pageX-mouseX;
            centerHandleMove(a);
            mouseX=event.pageX;
        }
    });
    function centerHandleMove(X) {
        var rightW = $(".right").width();
        rightW = rightW - X;
        var centerW = $(".center").width();
        centerW = centerW + X;
        $(".right").width(rightW);
        $(".center").width(centerW);
    }



    //自动插入次数
    var autoInsert=0;
    //提示次数
    var cueNum = 0;
    $("body").height($(window).height());
    //主要是left的代码
    $(".left .title").click(function (event) {
        changeGreyNum+=1;
        var checkOpen = $(this).next().css("display");
        console.log("brother display"+checkOpen);
        if(checkOpen!="none"){
            $(this).next().hide();
            $(this).children("img").attr("src","../images/arrow_right.png");
        }else {
            $(this).next().show();
            $(this).children("img").attr("src","../images/arrow_down.png");
        }
    });

    function insertAfterCursor(area,data){
        area = document.getElementById(area);
        $(area).focus();
        if(document.selection){
            var sel = document.selection().createRange();
            sel.txt = data;
        }else if(typeof area.selectionStart==="number"&&typeof area.selectionEnd==="number"){
            var startPos = area.selectionStart,
                endPos = area.selectionEnd,
                curPos = startPos,
                tempStr = area.value;
            var value = tempStr.substring(0,startPos)+data+tempStr.substring(endPos,tempStr.length);
            area.value=value;
            curPos+=value.length;
            area.selectionStart = area.selectionEnd = curPos;
        }else {
            area.value=area.value+data;
        }
    }

    $(".actiontBtn1").click(function () {
        changeGreyNum+=1;
        $(".center .utilBar ul li").first().show().click();
        $(this).parent().prev().css("color","#cccccc")
        $(this).hide();
    });
    $(".actiontBtn2").click(function () {
        changeGreyNum+=1;
        $(".center .utilBar ul li").first().next().show().click();
        $(this).parent().prev().css("color","#cccccc")
        $(this).hide();
    });
    $("#header").blur(function () {
        $("#header").attr("justBlur","true");
    });
    $("#code").blur(function () {
        $("#code").attr("justBlur","true");
    });
    $(".left .insertBtn").click(function () {
        changeGreyNum+=1;
        autoInsert+=1;
        $("#top .insertRest").text(10-cueNum);
        var code = $(this).prev().text();
        console.log("code:"+code);
        var textarea = $(this).prev().attr("aim");
        if($(textarea).attr("justBlur")=="true"){
            $(textarea).attr("justBlur","false");
        }else {
            $(".notFocustips").show();
            return;
        }
        insertAfterCursor(textarea.substring(1,textarea.length),code);
        $(this).prev().css("color","#cccccc");
        $(this).parent().parent().prev().css("color","#cccccc");
        $(this).hide();
    });
    $(".notFocustips").click(function () {
        console.log("should hide");
        $(this).hide();
    });
    //弹出的提示狂
    var actionItem;
    $(".yes").click(function () {
        $(".tips").hide();
        actionItem.prev().show();
        changeGreyNum+=1;
        if(actionItem.prev().find(".insertBtn").text()!="自动插入"){
            var that = actionItem;
            setTimeout(function () {
                console.log("that"+$(that));
                that.prev().css("color","#cccccc");
                that.parent().prev().css("color","#cccccc");
            },3000);
        }else {
            $(this).prev().css("color","#cccccc");
        }
        actionItem.hide();
        cueNum++;
        //标题变灰
        $("#top .cueRest").text(12-cueNum);
    });
    $(".cancle").click(function () {
        $(".tips").hide();
    });


    $(".left .cueBtn").click(function () {
        actionItem = $(this);
        console.log($(".notTip").prop("checked"));
        if($(".notTip").prop("checked")){
            $(".yes").click();
        }else {
            $(".tips").show();
        }
    });

    //根据不同的结果进行展示
    function oneCheck() {
        //运行结果目标达成数
        var stepResult = 0;
        if(listarray.length==1){
            stepResult+=1;
            if(listarray[0].length==5){
                stepResult+=1;
                //第三个目标不检查
            }
            stepResult+=1;
        }
        console.log("stepresult"+stepResult);
        if(stepResult==3){
            $(".netxTip").show();
            $(".netxTip").text("成功生成带头结点的单链表，下面调用SqQueue.h文件中你写的插入函数，再然后再遍历一遍，看是否成功");
        }else {
            $(".netxTip").hide();
        }
    }

    function twoCheck() {
        $(".netxTip").show();
        $(".netxTip").text("成功生成两幅图，是否结束实验？");
        $(".netxTip").append("<br><button class='settle'>结束实验</button>");
        $(".settle").click(function () {
            settlement();
        });
        $(".netxTip").show();
    }
    $(".settle").click(function () {
        settlement();
    });

    //对实验进行结算
    function settlement() {
        $(".over").hide();
        $(".theEndResult").show();
        console.log("showend");
        //运行结果目标达成数
        var stepResult = 0;
        if(listarray[1][2]==888){
            stepResult+=1;
        }
        if(stepResult==1){
            $(".theEndResult").empty();
            $(".theEndResult").append("<h3>实验成功</h3>");
            $(".theEndResult").append("<h4>"+timeSpan.innerHTML+"</h4>");
            $(".theEndResult").append("<h4>剩余提示数"+$(".cueRest").text()+"</h4>");
            $(".theEndResult").append("<h4>变灰步骤数"+changeGreyNum+"</h4>");
            $(".theEndResult").append("<h4>自动插入数"+autoInsert+"</h4>");
            $(".theEndResult").show();
        }else {
            $(".theEndResult").empty();
            $(".theEndResult").append("<h3>实验完成</h3>");
            $(".theEndResult").append("<h4>"+timeSpan.innerHTML+"</h4>");
            $(".theEndResult").append("<h4>剩余提示数"+$(".cueRest").text()+"</h4>");
            $(".theEndResult").append("<h4>变灰步骤数"+changeGreyNum+"</h4>");
            $(".theEndResult").append("<h4>自动插入数"+autoInsert+"</h4>");
            $(".theEndResult").show();
        }

    }

    //上传实验数据
    function upLoadData(isfinish){
        var testData = {"time":timeSpan.innerHTML,"cueRest": $(".cueRest").text(),"changGreyNum":changeGreyNum,"autoInsertNum":autoInsert};
        console.log("uploaddata!!");
        console.log(JSON.stringify(testData));
        $.ajax({
            type:"post",
            url:"../TestResultServlet",
            data: {
                method:"record",
                testNumber:"1",
                resultJSON:JSON.stringify(testData),
                finish:isfinish
            },
            async:false,
            success:function(data,status){
                if(data=="success"){
                    console.log(data+"upload success")
                }else {
                    console.log("upload fail")
                    //self.location="../login.html";
                }
            }
        });
    }
    uploadtimer = setInterval("upLoadData(1)",3000);

    $("textarea").keydown(function (e) {
        event = e||window.event;
        console.log(event.which);
        if(event.keyCode===9){
            event.preventDefault();
            var position=this.selectionStart+4;//此处我用了两个空格表示缩进，其实无所谓几个，只要和下面保持一致就好了。
            this.value=this.value.substr(0,this.selectionStart)+'    '+this.value.substr(this.selectionStart);
            this.selectionStart=position;
            this.selectionEnd=position;
            this.focus();
            event.returnValue=false;
        }
    });
    $(".bigLeft").click(function (event) {
        clearCanvas("myCanvas");
        console.log("left");
        event.stopPropagation();
        var picNum = $("#myCanvas").attr("picNum");
        var currSrcIndex = picNum;
        if(currSrcIndex==1){
            $("#myCanvas").attr("picNum",listarray.length);
        }else{
            $("#myCanvas").attr("picNum",currSrcIndex-1);
        }
        console.log("left picNum:"+$("#myCanvas").attr("picNum"))
        drawQueue("myCanvas",listarray[$("#myCanvas").attr('picNum') - 1]);
    });
    $(".over .bigRight").click(function (event) {
        event.stopPropagation();
        clearCanvas("myCanvas");
        console.log("right");
        var picNum = $("#myCanvas").attr("picNum");
        var currSrcIndex = parseInt(picNum);
        if(currSrcIndex==listarray.length){
            $("#myCanvas").attr("picNum",1);
        }else{
            $("#myCanvas").attr("picNum",currSrcIndex+1)
        }
        drawQueue("myCanvas",listarray[$("#myCanvas").attr('picNum') - 1]);
    });
    $(".over").click(function () {
        $(this).hide();
    });
    //存储链表数据
    var listarray;

    $(".run").click(runClick);
    function runClick(){
        checkIsLogin();
        listarray=null;
        $("#result").val("");
        $(".right ul").empty();
        $.ajax({
            type:"post",
            url:"../test",data: {
                "code":$("#code").val(),
                "SqQueue.h":$("#header").val(),
                "headerName":"SqQueue.h"
            },
            async:false,
            success:function (data,status) {
                if(data=="code error"){
                    alert(data);
                }
                console.log(data);
                data = $.parseJSON(data);
                handledData = handleQueueResult(data.result);
                $("#result").val(handledData[0]);
                listarray = handledData[1];
                console.log(listarray);
                $(".right ul").empty();
                var i = 1;
                for (i = 1; i <= listarray.length; i++) {
                    $(".right ul").append("<li><img src='../images/pic.png' picNum='" + i + "' alt=\"\"></li>")
                }
                $(".right ul li").click(function (event) {
                    $(".over").show();
                    $("#myCanvas").attr("picNum", $(this).children().attr("picNum"));
                    clearCanvas("myCanvas");
                    drawQueue("myCanvas",listarray[$("#myCanvas").attr('picNum') - 1]);
                });
                // if(listarray.length==1){
                //     oneCheck();
                // }
                // if(listarray.length==2){
                //     twoCheck();
                // }
            }});
        upLoadData();
    }
    $(".center .utilBar ul li").click(function () {
        $(this).removeClass("unselected").siblings().addClass("unselected");
    })


    //下线验证
    function checkIsLogin() {
        $.ajax({
            type:"post",
            url:"../UserServlet",
            data: {
                method:"checkLogin"
            },
            async:false,
            success:function(data,status){
                if(data=="isIn"){
                    console.log(data+" is isIn")
                }else {
                    self.location="../login.html";
                }
            }
        });
    }
</script>
</body>

</html>